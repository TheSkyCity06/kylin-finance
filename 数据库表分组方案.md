# 麒麟财务管理系统 - 数据库表分组方案

本文档根据表的前缀、外键关系和字段语义，将所有数据库表划分为不同的逻辑模块，便于在 Navicat 中生成分层的 E-R 模型图。

---

## 1. 用户权限中心 (sys_*)

**描述**：负责维护系统用户身份、角色分配及菜单权限控制，实现基于角色的访问控制（RBAC）机制

**包含的表**：
- sys_user
- sys_role
- sys_menu
- sys_user_role
- sys_role_menu

---

## 2. 会计科目管理 (fin_account, fin_commodity)

**描述**：维护会计科目体系（资产、负债、权益、收入、支出）和币种信息，是财务核算的基础数据

**包含的表**：
- fin_account
- fin_commodity

---

## 3. 业务实体管理 (fin_owner, fin_customer, fin_vendor, fin_employee)

**描述**：统一管理客户、供应商和员工等业务实体信息，支持往来账务的关联查询

**包含的表**：
- fin_owner
- fin_customer
- fin_vendor
- fin_employee

---

## 4. 凭证管理 (fin_transaction, fin_split, fin_entry)

**描述**：管理会计凭证的创建、审核和分录记录，支持借贷平衡校验，是会计核算的核心模块

**包含的表**：
- fin_transaction
- fin_split
- fin_entry

---

## 5. 销售业务管理 (fin_invoice, fin_invoice_item)

**描述**：处理销售发票的创建、过账和邮寄追踪，记录销售收入和应收账款

**包含的表**：
- fin_invoice
- fin_invoice_item

---

## 6. 采购业务管理 (fin_bill, fin_bill_item)

**描述**：处理供应商账单的创建和过账，记录采购成本和应付账款

**包含的表**：
- fin_bill
- fin_bill_item

---

## 7. 收付款管理 (fin_payment, fin_payment_allocation)

**描述**：管理收款和付款记录，支持支付分配（Lot Tracking），实现与发票/账单的关联结算

**包含的表**：
- fin_payment
- fin_payment_allocation

---

## 8. 员工报销管理 (fin_expense_claim, fin_expense_claim_item)

**描述**：处理员工费用报销单的申请、审批和过账，记录各项费用明细

**包含的表**：
- fin_expense_claim
- fin_expense_claim_item

---

## 9. 业务报销单管理 (biz_expense_claim, biz_expense_claim_detail)

**描述**：管理业务报销单的主表和明细，支持报销单的创建、过账和凭证关联

**包含的表**：
- biz_expense_claim
- biz_expense_claim_detail

---

## 10. 收付款单管理 (biz_receipt_payment)

**描述**：管理收付款单的创建和过账，记录与往来单位的收付款业务

**包含的表**：
- biz_receipt_payment

---

## 11. 冲销管理 (fin_credit_note)

**描述**：处理发票和账单的冲销业务，支持原单据的撤销和调整

**包含的表**：
- fin_credit_note

---

## 分组统计

- **总表数**：26 张表
- **分组数**：11 个逻辑模块
- **最大组表数**：5 张表（用户权限中心）
- **最小组表数**：1 张表（收付款单管理、冲销管理）

---

## 模块间关系说明

1. **用户权限中心** → 独立模块，与其他业务模块无直接外键关联
2. **会计科目管理** → 被多个业务模块引用（凭证、发票、账单、报销等）
3. **业务实体管理** → 被销售、采购、收付款、报销等模块引用
4. **凭证管理** → 被所有业务单据模块引用（发票、账单、报销、收付款等）
5. **销售业务管理** → 引用业务实体（客户）、会计科目、凭证
6. **采购业务管理** → 引用业务实体（供应商）、会计科目、凭证
7. **收付款管理** → 引用业务实体、会计科目、凭证，并与发票/账单关联
8. **员工报销管理** → 引用业务实体（员工）、会计科目、凭证
9. **业务报销单管理** → 引用业务实体（员工）、会计科目、凭证
10. **收付款单管理** → 引用业务实体、会计科目、凭证
11. **冲销管理** → 引用凭证，关联原单据（发票或账单）

---

## 使用建议

在 Navicat 中创建 E-R 图时，建议：
1. 按上述分组创建不同的图层（Layer）或分组（Group）
2. 先展示核心模块（会计科目管理、业务实体管理、凭证管理）
3. 再展示业务模块（销售、采购、收付款、报销等）
4. 最后展示辅助模块（冲销管理）
5. 用户权限中心可单独展示，或作为顶层模块

